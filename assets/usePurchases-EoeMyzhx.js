import{u as m,r as t,c as y}from"./index-4yxRmCfz.js";const S=()=>{const{getPurchases:r,account:n}=m(),[o,l]=t.useState("available"),[c,i]=t.useState([]),[f,u]=t.useState(!1),[h,p]=t.useState({type:null,status:null,hash:null}),d=c.filter(e=>!e.consumed),b=c.filter(e=>e.consumed),s=t.useCallback(async()=>{u(!0);try{const e=await r();return i(e),!0}catch(e){return console.error("Failed to fetch purchases:",e),!1}finally{u(!1)}},[r]);return t.useEffect(()=>{const e=y.on("transactionUpdate",a=>{p(a),a.status==="completed"&&(a.type==="purchase"||a.type==="consume")&&s()});return()=>{e()}},[s]),t.useEffect(()=>{n&&s()},[n,s]),{activeTab:o,setActiveTab:l,purchases:c,availablePurchases:d,consumedPurchases:b,fetchPurchases:s,loading:f,transactionState:h}};export{S as u};
