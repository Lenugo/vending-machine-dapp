import{j as s,i as o}from"./index-CBWIs_fd.js";import{u as N}from"./usePurchases-DGxuk1FS.js";import"./vendor-_uqhELNW.js";import"./web3-_dJq9jWk.js";function u({onClose:d,onConsume:r}){const{activeTab:a,setActiveTab:m,availablePurchases:l,consumedPurchases:n,transactionState:i}=N(),c=(i==null?void 0:i.status)==="sending",x=c&&(i==null?void 0:i.type)==="consume",j=e=>{e.target.className==="purchases-modal"&&d()},t=()=>x;return s.jsxs("div",{className:"purchases-modal",onClick:j,children:[c&&s.jsxs("div",{className:"transaction-loading-overlay",children:[s.jsx("div",{className:"transaction-loading-spinner"}),s.jsx("p",{children:(i==null?void 0:i.type)==="consume"?"Consuming item...":(i==null?void 0:i.type)==="purchase"?"Purchasing item...":"Processing transaction..."})]}),s.jsxs("div",{className:"purchases-content",children:[s.jsxs("div",{className:"purchases-header",children:[s.jsx("h2",{children:"My Purchases"}),s.jsx("button",{className:"close-button",onClick:d,children:"×"})]}),s.jsxs("div",{className:"purchases-tabs",children:[s.jsxs("button",{className:`tab-button ${a==="available"?"active":""}`,onClick:()=>m("available"),children:["Available (",l.length,")"]}),s.jsxs("button",{className:`tab-button ${a==="history"?"active":""}`,onClick:()=>m("history"),children:["History (",n.length,")"]})]}),a==="available"&&s.jsx("div",{className:"purchases-list",children:l.length===0?s.jsxs("div",{className:"no-purchases",children:[s.jsx("p",{children:"No Available Items"}),s.jsx("p",{className:"subtext",children:"Items you purchase will appear here."})]}):l.map(e=>s.jsxs("div",{className:"purchase-item available-item",children:[s.jsx("div",{className:"purchase-image",children:s.jsx("img",{src:`${o}${e==null?void 0:e.image}`,alt:e==null?void 0:e.name})}),s.jsxs("div",{className:"purchase-details",children:[s.jsx("h3",{children:e==null?void 0:e.name}),s.jsxs("p",{className:"purchase-date",children:["Purchased on ",new Date(Number(e==null?void 0:e.date)*1e3).toLocaleDateString()]}),s.jsxs("p",{className:"purchase-price",children:["$",e==null?void 0:e.price]})]}),s.jsx("div",{className:"purchase-status",children:s.jsx("span",{className:"status-badge available",children:"Available"})}),s.jsx("button",{className:"consume-button",onClick:()=>r(e.id),disabled:t(e.id),children:t(e.id)?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"loading-spinner"})," Consuming..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"consume-icon",children:"☕"})," Consume Item"]})})]},e.id))}),a==="history"&&s.jsx("div",{className:"purchases-list",children:n.length===0?s.jsxs("div",{className:"no-purchases",children:[s.jsx("p",{children:"No Consumed Items"}),s.jsx("p",{className:"subtext",children:"Items you've consumed will appear here."})]}):n.map(e=>s.jsxs("div",{className:"purchase-item consumed-item",children:[s.jsx("div",{className:"purchase-image",children:s.jsx("img",{src:`${o}${e==null?void 0:e.image}`,alt:e==null?void 0:e.name})}),s.jsxs("div",{className:"purchase-details",children:[s.jsx("h3",{children:e==null?void 0:e.name}),s.jsxs("p",{className:"purchase-date",children:["Purchased on ",new Date(Number(e==null?void 0:e.date)*1e3).toLocaleDateString()]}),s.jsxs("p",{className:"purchase-price",children:["$",e==null?void 0:e.price]})]}),s.jsx("div",{className:"purchase-status",children:s.jsx("span",{className:"status-badge consumed",children:"Consumed"})}),s.jsxs("div",{className:"consumed-info",children:[s.jsx("span",{className:"consume-icon",children:"☕"})," Already Consumed"]})]},e.id))})]})]})}export{u as default};
